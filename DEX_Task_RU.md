# Задача по декс
Комбинаторная(?) задачка про передачу монеток фиксированыных номиналов между трейдерами

## Plasma Cash
Есть плазма кеш.
:::info
*Дописать сюда описание этой сисетмы.*
:::
В ней есть монеты, принадлежащие пользователям. Пользователи 
- вносят в плазму деньги (deposit)
- передают друг другу суммы денег (transactoin)
- выводят из плазмы деньги (withdrawal)

### Дискретное время (блоки)
Время разделено на интервалы (блоки). в одном блоке могут происходить несколько операций.

## Основные сущности
### Монеты
Более сухое описание процессов
- Есть набор монеток
    - у каждой монетки есть ее номинал `V` (value). он фиксированный на все время жизни монеты
    - у каждой монеты есть ее текущий владелец `A` (address). он меняется при передачи монеты
    - у каждой монеты есть **история** `H` (history) - упрощенно, список всех транзакций
- Можно создавать новые монетки ()
    - указывая номинал и владельца
    - история состоит из одного элемента ("создание монеты")
- Можно передавать монету новому владельцу
    - нужно быть текущим владельцем монеты
    - история дополняется **транзакцией** (`T`) - Вася Маше отдал монету `M` в блоке `N`: `H_M(N) = H_M(N-1) + T<M: A_1->A_2>`
    - по итогу транзакции новый владелец должен иметь полную историю монеты
- Можно "уничтожать" монеты (выводить из плазмы)
    - для этого надо предоставить полную историю монеты

### Обменник
Есть **обменник**
- В нем можно разменять одни монеты на другие
    - нужно быть владельцем всех монет
    - суммы номиналов должны сопадать
    - нужно предоставить историю всех старых монет
    - у всех новых монет чистая история
- Таким образом в нем можно обнулить `H` отдельной монеты. 

### Стоимость операций
Есть некоторые расходы, связанные с операциями с монетами:
- надо хранить историю - расходы пропорциональны(?) ее размеру и длительности хранения `k1 * size(H) * time("блок, когда я получил монету", now)`
- надо передавать саму монету `k2`
- надо передавать историю монеты `k3 * size(H)`
    - если у получателя есть часть истории, то достаточно передать недостающую часть
- использование обменника `k4 * sum(size(H)) + k5`

### Реалистичные транзакции
Большинство транзакций происходят между выделенным адресом (биржей) и всеми другими адресами (трейдерами). Транзакций между трейдерами почти не бывает.
Как правило, биржа получает некоторую сумму от трейдера (создание ордера), а некоторое время спустя возращает эту же сумму (отмена ордера) или близкую к ней ("исполнение ордера"). Несколько ордеров от одного трейдера могут существовать одновременно. 

Суммы транзакций распределены **как-то**. 

## Вопросы/задачи
В целом, хочется минимизировать расходы 
- на создание, передачу, очистку и вывод монет
- на передачу истории монет

Для этого надо ответить на вопросы:
- Монеты каких номиналов использовать в системе?
- Монеты каких номиналов выбрать трейдеру для оплаты суммы?
- Какие конкретно монеты выбрать для данной транзакции?
- Когда и при каких условиях пользоваться обменником?
- 